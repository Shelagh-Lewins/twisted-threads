<template name="auto_preview">
<div class="auto_preview {{preview_rotation}}">
<button class="rotate_preview">Rotate</button>

<div class="holder" style="{{rotation_correction}}">

  <svg id="svg4413" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 {{viewbox_width}} {{viewbox_height}}"  shape-rendering="geometricPrecision" width="{{total_width}}">

  {{#each row_indexes}}
    {{> auto_preview_weft_row}}
  {{/each}}

  {{#each row_indexes}}
    {{> auto_preview_row}}
  {{/each}}
  </svg>

</div>

</div>
</template>

<template name="auto_preview_weft_row">
{{> auto_preview_weft}}
</template>

<template name="auto_preview_row">
{{#each tablet_indexes}}
  {{#with row=.. tablet=this}}
    {{> auto_preview_element}}
  {{/with}}
{{/each}}
</template>

<template name="auto_preview_weft">
{{#with data this}}
  <g transform="translate(0 {{y_offset}})"><path transform='scale({{scale}} 1)' d="m41.711 79.918h-41.733v-42.689h41.733z" fill="{{color}}"/></g>
{{/with}}
</template>

<template name="auto_preview_element">
{{#with data row tablet}}
{{#if special}}
  <g transform="translate({{x_offset}} {{y_offset}})">
    {{#if equals style "S1"}}
{{> forward_2_svg}}
{{/if}}
{{#if equals style "S2"}}
{{> backward_2_svg}}
{{/if}}
  </g>
{{else}}
  <g transform="translate({{x_offset}} {{y_offset}})"><path d="{{shape}}" stroke="#000" stroke-width="1.015" fill="{{color}}"/></g>
  {{/if}}
{{/with}}
</template>

<template name="forward_2_svg">
<path d="m0.36291 112 40.839-54.951v-27.538l-40.839 54.947z" stroke="#000" stroke-width="1.015" fill="#ffffff"></path>
<path d="m0.36291 83.917 40.839-54.947v-27.538l-40.839 54.947z" stroke="#000" stroke-width="1.015" fill="#ffffff"></path>
</template>

<template name="backward_2_svg">
<path d="m41.202 112-40.839-54.951v-27.538l40.839 54.947" stroke="#000" stroke-width="1.015" fill="#ffffff"></path>
<path d="m41.202 83.917-40.839-54.947v-27.538l40.839 54.947z" stroke="#000" stroke-width="1.015" fill="#ffffff"></path>
</template>



